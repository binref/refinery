#!/usr/bin/env python3
# -*- coding: utf-8 -*-
from .. import TestUnitBase


class TestMorse(TestUnitBase):
    def test_fo8(self):
        data = (
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- '
            b'----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- ----- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- '
            b'----- -..- ...-- .---- --..-- ----- -..- ...-- .---- --..-- ----- -..- ...-- ----- --..-- ----- -..- ...-- .----'
        )
        unit = self.load_pipeline('morse | pack | base 2 | b64')
        self.assertEqual(data | unit | str, 'synt{CAESAR_ME!-l0h_T07_vG_e1tuG!}\n')

    def test_invertible_01(self):
        unit = self.load()
        self.assertEqual(B'hello world!', B'Hello World!' | -unit | unit | bytes)

    def test_invertible_02(self):
        unit = self.load('ru')
        test = 'Я хочу знать азбуку Морзе.'
        self.assertEqual(test.lower(), test.encode('utf8') | -unit | unit | str)

    def test_invertible_03(self):
        unit = self.load()
        test = "Binär-Spaß über alles!"
        self.assertEqual(test.lower(), test.encode('utf8') | -unit | unit | str)

    def test_invertible_04(self):
        unit = self.load()
        test = (
            'Окно, рассвет... едва видны, как тени,\n'
            'Два стула, книги, полка на стене.\n'
            'Проснулся ль я? Иль неземной сирени\n'
            'Мне свежесть чудится еще во сне?\n'
            'Иль это сквозь могильную разлуку,\n'
            'Сквозь тускло - дымчатые облака\n'
            'Мне тень протягивает руку\n'
            'И улыбается издалека?\n'
        )
        self.assertEqual(test.lower(), test.encode('utf8') | -unit | unit | str)
